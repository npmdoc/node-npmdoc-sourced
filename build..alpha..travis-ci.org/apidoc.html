<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/mateodelnorte/sourced#readme"

    >sourced (v0.1.4)</a>
</h1>
<h4>Tiny framework for building models with the event sourcing  pattern (events and snapshots).</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.sourced">module sourced</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sourced.Entity">
            function <span class="apidocSignatureSpan">sourced.</span>Entity
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sourced.Value">
            function <span class="apidocSignatureSpan">sourced.</span>Value
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">sourced.</span>Entity.prototype</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.sourced.Entity">module sourced.Entity</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sourced.Entity.Entity">
            function <span class="apidocSignatureSpan">sourced.</span>Entity
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sourced.Entity.digestMethod">
            function <span class="apidocSignatureSpan">sourced.Entity.</span>digestMethod
            <span class="apidocSignatureSpan">(type, fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sourced.Entity.mergeProperty">
            function <span class="apidocSignatureSpan">sourced.Entity.</span>mergeProperty
            <span class="apidocSignatureSpan">(type, name, fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sourced.Entity.super_">
            function <span class="apidocSignatureSpan">sourced.Entity.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.sourced.Entity.prototype">module sourced.Entity.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sourced.Entity.prototype.digest">
            function <span class="apidocSignatureSpan">sourced.Entity.prototype.</span>digest
            <span class="apidocSignatureSpan">(method, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sourced.Entity.prototype.emit">
            function <span class="apidocSignatureSpan">sourced.Entity.prototype.</span>emit
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sourced.Entity.prototype.enqueue">
            function <span class="apidocSignatureSpan">sourced.Entity.prototype.</span>enqueue
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sourced.Entity.prototype.merge">
            function <span class="apidocSignatureSpan">sourced.Entity.prototype.</span>merge
            <span class="apidocSignatureSpan">(snapshot)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sourced.Entity.prototype.mergeProperty">
            function <span class="apidocSignatureSpan">sourced.Entity.prototype.</span>mergeProperty
            <span class="apidocSignatureSpan">(name, value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sourced.Entity.prototype.replay">
            function <span class="apidocSignatureSpan">sourced.Entity.prototype.</span>replay
            <span class="apidocSignatureSpan">(events)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sourced.Entity.prototype.snapshot">
            function <span class="apidocSignatureSpan">sourced.Entity.prototype.</span>snapshot
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.sourced.Entity.prototype.trimSnapshot">
            function <span class="apidocSignatureSpan">sourced.Entity.prototype.</span>trimSnapshot
            <span class="apidocSignatureSpan">(snapshot)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.sourced" id="apidoc.module.sourced">module sourced</a></h1>


    <h2>
        <a href="#apidoc.element.sourced.Entity" id="apidoc.element.sourced.Entity">
        function <span class="apidocSignatureSpan">sourced.</span>Entity
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Entity() {

<span class="apidocCodeCommentSpan">  /**
   * [Description]
   *
   * @member {Array} eventsToEmit
   * @todo discuss the use of this so it can be documented better.
   */
</span>  this.eventsToEmit = [];

  /**
   * [Description]
   *
   * @member {Array} newEvents
   * @todo discuss the use of this so it can be documented better.
   */
  this.newEvents = [];

  /**
   * Boolean to prevent emit, enqueue and digest from running during replay.
   *
   * @member {Boolean} replaying
   */
  this.replaying = false;

  /**
   * Holds the version of the latest snapshot for the entity.
   *
   * @member {Number} snapshotVersion
   */
  this.snapshotVersion = 0;

  /**
   * Holds the event&#x27;s timestamp in the entity.
   *
   * @member {Number} timestamp
   */
  this.timestamp = Date.now();

  /**
   * Holds the current version of the entity.
   *
   * @member {Number} version
   */
  this.version = 0;

  events.EventEmitter.call(this);
  var args = Array.prototype.slice.call(arguments);

  /**
   * If one argument is passed, asume it&#x27;s a snapshot and merge it.
   *
   * @todo This should probably be changed. What if it&#x27;s not a snapshot/object?
   */
  if (args[0]){
    var snapshot = args[0];
    this.merge(snapshot);
  }

  /**
   * If two arguments are passed, asume the second is an array of events and
   * replay them.
   *
   * @todo This should probably be changed. What if it&#x27;s not an array?
   */
  if (args[1]){
    var evnts = args[1];
    this.replay(evnts);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.sourced.Value" id="apidoc.element.sourced.Value">
        function <span class="apidocSignatureSpan">sourced.</span>Value
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Value = function (obj) {
  return Object.freeze(obj);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.sourced.Entity" id="apidoc.module.sourced.Entity">module sourced.Entity</a></h1>


    <h2>
        <a href="#apidoc.element.sourced.Entity.Entity" id="apidoc.element.sourced.Entity.Entity">
        function <span class="apidocSignatureSpan">sourced.</span>Entity
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Entity() {

<span class="apidocCodeCommentSpan">  /**
   * [Description]
   *
   * @member {Array} eventsToEmit
   * @todo discuss the use of this so it can be documented better.
   */
</span>  this.eventsToEmit = [];

  /**
   * [Description]
   *
   * @member {Array} newEvents
   * @todo discuss the use of this so it can be documented better.
   */
  this.newEvents = [];

  /**
   * Boolean to prevent emit, enqueue and digest from running during replay.
   *
   * @member {Boolean} replaying
   */
  this.replaying = false;

  /**
   * Holds the version of the latest snapshot for the entity.
   *
   * @member {Number} snapshotVersion
   */
  this.snapshotVersion = 0;

  /**
   * Holds the event&#x27;s timestamp in the entity.
   *
   * @member {Number} timestamp
   */
  this.timestamp = Date.now();

  /**
   * Holds the current version of the entity.
   *
   * @member {Number} version
   */
  this.version = 0;

  events.EventEmitter.call(this);
  var args = Array.prototype.slice.call(arguments);

  /**
   * If one argument is passed, asume it&#x27;s a snapshot and merge it.
   *
   * @todo This should probably be changed. What if it&#x27;s not a snapshot/object?
   */
  if (args[0]){
    var snapshot = args[0];
    this.merge(snapshot);
  }

  /**
   * If two arguments are passed, asume the second is an array of events and
   * replay them.
   *
   * @todo This should probably be changed. What if it&#x27;s not an array?
   */
  if (args[1]){
    var evnts = args[1];
    this.replay(evnts);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.sourced.Entity.digestMethod" id="apidoc.element.sourced.Entity.digestMethod">
        function <span class="apidocSignatureSpan">sourced.Entity.</span>digestMethod
        <span class="apidocSignatureSpan">(type, fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">digestMethod = function (type, fn) {
  if ( ! type) throw new EntityError(&#x27;type is required for digest method definitions&#x27;);
  if ( ! fn) throw new EntityError(&#x27;a function is required for digest method definitions&#x27;);
  if ( ! fn.name) throw new EntityError(&#x27;Anonmyous functions are not allowed in digest method definitions. Please provide a function
 name&#x27;);
  type.prototype[fn.name] = function () {
    var digestArgs = Array.prototype.slice.call(arguments);
    digestArgs.unshift(fn.name);
    Entity.prototype.digest.apply(this, digestArgs);

    var methodArgs = Array.prototype.slice.call(arguments);
    return fn.apply(this, methodArgs);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        * [.digest(method, data)](#Entity+digest)
        * [.merge(snapshot)](#Entity+merge)
        * [.mergeProperty(name, value)](#Entity+mergeProperty)
        * [.replay(events)](#Entity+replay)
        * [.snapshot()](#Entity+snapshot) ⇒ &#x3c;code&#x3e;Object&#x3c;/code&#x3e;
        * [.trimSnapshot(snapshot)](#Entity+trimSnapshot)
    * _static_
        * [.<span class="apidocCodeKeywordSpan">digestMethod</span>(type, fn)](#Entity.digestMethod)
        * [.mergeProperty(type, name, fn)](#Entity.mergeProperty)

&#x3c;a name=&#x22;new_Entity_new&#x22;&#x3e;&#x3c;/a&#x3e;

### new Entity([snapshot], [events])
Creates an event-sourced Entity.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.sourced.Entity.mergeProperty" id="apidoc.element.sourced.Entity.mergeProperty">
        function <span class="apidocSignatureSpan">sourced.Entity.</span>mergeProperty
        <span class="apidocSignatureSpan">(type, name, fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">mergeProperty = function (type, name, fn) {
  if ( ! mergeProperties.has(type.name)) mergeProperties.set(type.name, new Map());
  mergeProperties.get(type.name).set(name, fn);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* [Entity](#Entity)
* [new Entity([snapshot], [events])](#new_Entity_new)
* _instance_
    * [.emit()](#Entity+emit)
    * [.enqueue()](#Entity+enqueue)
    * [.digest(method, data)](#Entity+digest)
    * [.merge(snapshot)](#Entity+merge)
    * [.<span class="apidocCodeKeywordSpan">mergeProperty</span>(name, value)](#Entity+mergeProperty)
    * [.replay(events)](#Entity+replay)
    * [.snapshot()](#Entity+snapshot) ⇒ &#x3c;code&#x3e;Object&#x3c;/code&#x3e;
    * [.trimSnapshot(snapshot)](#Entity+trimSnapshot)
* _static_
    * [.digestMethod(type, fn)](#Entity.digestMethod)
    * [.mergeProperty(type, name, fn)](#Entity.mergeProperty)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.sourced.Entity.super_" id="apidoc.element.sourced.Entity.super_">
        function <span class="apidocSignatureSpan">sourced.Entity.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.sourced.Entity.prototype" id="apidoc.module.sourced.Entity.prototype">module sourced.Entity.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.sourced.Entity.prototype.digest" id="apidoc.element.sourced.Entity.prototype.digest">
        function <span class="apidocSignatureSpan">sourced.Entity.prototype.</span>digest
        <span class="apidocSignatureSpan">(method, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function digest(method, data) {
  if( ! this.replaying) {
    this.timestamp = Date.now();
    this.version = this.version + 1;
    log(util.format(&#x27;digesting event \&#x27;%s\&#x27; w/ data %j&#x27;, method, data));
    this.newEvents.push({
      method: method,
      data: data,
      timestamp: this.timestamp,
      version: this.version
    });
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
**License**: MIT

* [Entity](#Entity)
* [new Entity([snapshot], [events])](#new_Entity_new)
* _instance_
    * [.emit()](#Entity+emit)
    * [.enqueue()](#Entity+enqueue)
    * [.<span class="apidocCodeKeywordSpan">digest</span>(method, data)](#Entity+digest)
    * [.merge(snapshot)](#Entity+merge)
    * [.mergeProperty(name, value)](#Entity+mergeProperty)
    * [.replay(events)](#Entity+replay)
    * [.snapshot()](#Entity+snapshot) ⇒ &#x3c;code&#x3e;Object&#x3c;/code&#x3e;
    * [.trimSnapshot(snapshot)](#Entity+trimSnapshot)
* _static_
    * [.digestMethod(type, fn)](#Entity.digestMethod)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.sourced.Entity.prototype.emit" id="apidoc.element.sourced.Entity.prototype.emit">
        function <span class="apidocSignatureSpan">sourced.Entity.prototype.</span>emit
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function emit() {
  if ( ! this.replaying) {
    events.EventEmitter.prototype.emit.apply(this, arguments);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
**Kind**: global class
**Requires**: &#x3c;code&#x3e;module:events&#x3c;/code&#x3e;, &#x3c;code&#x3e;module:debug&#x3c;/code&#x3e;, &#x3c;code&#x3e;module
:util&#x3c;/code&#x3e;, &#x3c;code&#x3e;module:lodash&#x3c;/code&#x3e;
**License**: MIT

* [Entity](#Entity)
* [new Entity([snapshot], [events])](#new_Entity_new)
* _instance_
    * [.<span class="apidocCodeKeywordSpan">emit</span>()](#Entity+emit)
    * [.enqueue()](#Entity+enqueue)
    * [.digest(method, data)](#Entity+digest)
    * [.merge(snapshot)](#Entity+merge)
    * [.mergeProperty(name, value)](#Entity+mergeProperty)
    * [.replay(events)](#Entity+replay)
    * [.snapshot()](#Entity+snapshot) ⇒ &#x3c;code&#x3e;Object&#x3c;/code&#x3e;
    * [.trimSnapshot(snapshot)](#Entity+trimSnapshot)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.sourced.Entity.prototype.enqueue" id="apidoc.element.sourced.Entity.prototype.enqueue">
        function <span class="apidocSignatureSpan">sourced.Entity.prototype.</span>enqueue
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function enqueue() {
  if ( ! this.replaying) {
    this.eventsToEmit.push(arguments);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
**Requires**: &#x3c;code&#x3e;module:events&#x3c;/code&#x3e;, &#x3c;code&#x3e;module:debug&#x3c;/code&#x3e;, &#x3c;code&#x3e;module
:util&#x3c;/code&#x3e;, &#x3c;code&#x3e;module:lodash&#x3c;/code&#x3e;
**License**: MIT

* [Entity](#Entity)
* [new Entity([snapshot], [events])](#new_Entity_new)
* _instance_
    * [.emit()](#Entity+emit)
    * [.<span class="apidocCodeKeywordSpan">enqueue</span>()](#Entity+enqueue)
    * [.digest(method, data)](#Entity+digest)
    * [.merge(snapshot)](#Entity+merge)
    * [.mergeProperty(name, value)](#Entity+mergeProperty)
    * [.replay(events)](#Entity+replay)
    * [.snapshot()](#Entity+snapshot) ⇒ &#x3c;code&#x3e;Object&#x3c;/code&#x3e;
    * [.trimSnapshot(snapshot)](#Entity+trimSnapshot)
* _static_
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.sourced.Entity.prototype.merge" id="apidoc.element.sourced.Entity.prototype.merge">
        function <span class="apidocSignatureSpan">sourced.Entity.prototype.</span>merge
        <span class="apidocSignatureSpan">(snapshot)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function merge(snapshot) {
  log(util.format(&#x27;merging snapshot %j&#x27;, snapshot));
  for (var property in snapshot) {
    if (snapshot.hasOwnProperty(property))
      var val = _.cloneDeep(snapshot[property]);
      this.mergeProperty(property, val);
  }
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

* [Entity](#Entity)
* [new Entity([snapshot], [events])](#new_Entity_new)
* _instance_
    * [.emit()](#Entity+emit)
    * [.enqueue()](#Entity+enqueue)
    * [.digest(method, data)](#Entity+digest)
    * [.<span class="apidocCodeKeywordSpan">merge</span>(snapshot)](#Entity+merge)
    * [.mergeProperty(name, value)](#Entity+mergeProperty)
    * [.replay(events)](#Entity+replay)
    * [.snapshot()](#Entity+snapshot) ⇒ &#x3c;code&#x3e;Object&#x3c;/code&#x3e;
    * [.trimSnapshot(snapshot)](#Entity+trimSnapshot)
* _static_
    * [.digestMethod(type, fn)](#Entity.digestMethod)
    * [.mergeProperty(type, name, fn)](#Entity.mergeProperty)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.sourced.Entity.prototype.mergeProperty" id="apidoc.element.sourced.Entity.prototype.mergeProperty">
        function <span class="apidocSignatureSpan">sourced.Entity.prototype.</span>mergeProperty
        <span class="apidocSignatureSpan">(name, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function mergeProperty(name, value) {
  if (mergeProperties.size &#x26;&#x26;
      mergeProperties.has(this.__proto__.constructor.name) &#x26;&#x26;
      mergeProperties.get(this.__proto__.constructor.name).has(name) &#x26;&#x26;
      typeof mergeProperties.get(this.__proto__.constructor.name).get(name) === &#x27;function&#x27;) {
    return mergeProperties.get(this.__proto__.constructor.name).get(name).call(this, value);
  }
  else if (typeof value === &#x27;object&#x27; &#x26;&#x26; typeof this[name] === &#x27;object&#x27;) _.merge(this[name], value);
  else this[name] = value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* [Entity](#Entity)
* [new Entity([snapshot], [events])](#new_Entity_new)
* _instance_
    * [.emit()](#Entity+emit)
    * [.enqueue()](#Entity+enqueue)
    * [.digest(method, data)](#Entity+digest)
    * [.merge(snapshot)](#Entity+merge)
    * [.<span class="apidocCodeKeywordSpan">mergeProperty</span>(name, value)](#Entity+mergeProperty)
    * [.replay(events)](#Entity+replay)
    * [.snapshot()](#Entity+snapshot) ⇒ &#x3c;code&#x3e;Object&#x3c;/code&#x3e;
    * [.trimSnapshot(snapshot)](#Entity+trimSnapshot)
* _static_
    * [.digestMethod(type, fn)](#Entity.digestMethod)
    * [.mergeProperty(type, name, fn)](#Entity.mergeProperty)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.sourced.Entity.prototype.replay" id="apidoc.element.sourced.Entity.prototype.replay">
        function <span class="apidocSignatureSpan">sourced.Entity.prototype.</span>replay
        <span class="apidocSignatureSpan">(events)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function replay(events) {
  var self = this;

  this.replaying = true;

  log(util.format(&#x27;replaying events %j&#x27;, events));

  events.forEach(function (event) {
    if (self[event.method]) {
      self[event.method](event.data);
      self.version = event.version;
    } else {
      var classNameRegex = /function (.{1,})\w?\(/,
          className = classNameRegex.exec(self.constructor.toString())[1],
          errorMessage = util.format(&#x27;method \&#x27;%s\&#x27; does not exist on model \&#x27;%s\&#x27;&#x27;, event.method, className);
      log(errorMessage);
      throw new EntityError(errorMessage);
    }
  });

  this.replaying = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    * [new Entity([snapshot], [events])](#new_Entity_new)
    * _instance_
        * [.emit()](#Entity+emit)
        * [.enqueue()](#Entity+enqueue)
        * [.digest(method, data)](#Entity+digest)
        * [.merge(snapshot)](#Entity+merge)
        * [.mergeProperty(name, value)](#Entity+mergeProperty)
        * [.<span class="apidocCodeKeywordSpan">replay</span>(events)](#Entity+replay)
        * [.snapshot()](#Entity+snapshot) ⇒ &#x3c;code&#x3e;Object&#x3c;/code&#x3e;
        * [.trimSnapshot(snapshot)](#Entity+trimSnapshot)
    * _static_
        * [.digestMethod(type, fn)](#Entity.digestMethod)
        * [.mergeProperty(type, name, fn)](#Entity.mergeProperty)

&#x3c;a name=&#x22;new_Entity_new&#x22;&#x3e;&#x3c;/a&#x3e;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.sourced.Entity.prototype.snapshot" id="apidoc.element.sourced.Entity.prototype.snapshot">
        function <span class="apidocSignatureSpan">sourced.Entity.prototype.</span>snapshot
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function snapshot() {
  this.snapshotVersion = this.version;
  var snap = _.cloneDeep(this, true);
  return this.trimSnapshot(snap);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    * _instance_
        * [.emit()](#Entity+emit)
        * [.enqueue()](#Entity+enqueue)
        * [.digest(method, data)](#Entity+digest)
        * [.merge(snapshot)](#Entity+merge)
        * [.mergeProperty(name, value)](#Entity+mergeProperty)
        * [.replay(events)](#Entity+replay)
        * [.<span class="apidocCodeKeywordSpan">snapshot</span>()](#Entity+snapshot) ⇒ &#x3c;code&#x3e;Object&#x3c;/code&#x3e;
        * [.trimSnapshot(snapshot)](#Entity+trimSnapshot)
    * _static_
        * [.digestMethod(type, fn)](#Entity.digestMethod)
        * [.mergeProperty(type, name, fn)](#Entity.mergeProperty)

&#x3c;a name=&#x22;new_Entity_new&#x22;&#x3e;&#x3c;/a&#x3e;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.sourced.Entity.prototype.trimSnapshot" id="apidoc.element.sourced.Entity.prototype.trimSnapshot">
        function <span class="apidocSignatureSpan">sourced.Entity.prototype.</span>trimSnapshot
        <span class="apidocSignatureSpan">(snapshot)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function trimSnapshot(snapshot) {
  delete snapshot.eventsToEmit;
  delete snapshot.newEvents;
  delete snapshot.replaying;
  delete snapshot._events;
  delete snapshot._maxListeners;
  delete snapshot.domain;
  return snapshot;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        * [.emit()](#Entity+emit)
        * [.enqueue()](#Entity+enqueue)
        * [.digest(method, data)](#Entity+digest)
        * [.merge(snapshot)](#Entity+merge)
        * [.mergeProperty(name, value)](#Entity+mergeProperty)
        * [.replay(events)](#Entity+replay)
        * [.snapshot()](#Entity+snapshot) ⇒ &#x3c;code&#x3e;Object&#x3c;/code&#x3e;
        * [.<span class="apidocCodeKeywordSpan">trimSnapshot</span>(snapshot)](#Entity+trimSnapshot)
    * _static_
        * [.digestMethod(type, fn)](#Entity.digestMethod)
        * [.mergeProperty(type, name, fn)](#Entity.mergeProperty)

&#x3c;a name=&#x22;new_Entity_new&#x22;&#x3e;&#x3c;/a&#x3e;

### new Entity([snapshot], [events])
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
